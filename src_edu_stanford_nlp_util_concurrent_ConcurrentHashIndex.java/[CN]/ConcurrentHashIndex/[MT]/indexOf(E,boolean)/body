{
  if (add) {
synchronized (this) {
      if (!item2Index.containsKey(o)) {
        int newIndex=index2Item.size();
        item2Index.put(o,newIndex);
        index2Item.put(newIndex,o);
      }
    }
    return item2Index.get(o);
  }
 else {
    return indexOf(o);
  }
}
