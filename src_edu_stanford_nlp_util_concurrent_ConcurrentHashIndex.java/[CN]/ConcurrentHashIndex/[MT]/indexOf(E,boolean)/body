{
  if (add) {
    lock.writeLock().lock();
    if (!item2Index.containsKey(o)) {
      int newIndex=index2Item.size();
      item2Index.put(o,newIndex);
      index2Item.add(o);
    }
    lock.writeLock().unlock();
    return item2Index.get(o);
  }
 else {
    return indexOf(o);
  }
}
