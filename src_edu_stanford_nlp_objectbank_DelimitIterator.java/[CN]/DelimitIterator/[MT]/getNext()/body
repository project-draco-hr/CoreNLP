{
  if (input == null) {
    return null;
  }
  if (input.length() < 1) {
    input=null;
    return null;
  }
  int delimIndex=input.indexOf(delimiter);
  if (eolIsSignificant) {
    int eolIndex=input.indexOf('\n');
    if (eolIndex >= 0 && (eolIndex < delimIndex || delimIndex < 0)) {
      String token=input.substring(0,eolIndex);
      input=input.substring(eolIndex + 1);
      return token;
    }
  }
  if (delimIndex < 0) {
    String token=input;
    if (token.length() < 1) {
      token=null;
    }
    input=null;
    return token;
  }
  String token=input.substring(0,delimIndex);
  input=input.substring(delimIndex + delimiter.length());
  return token;
}
