{
  Options op=new Options();
  HeadFinder binaryHeadFinder=new BinaryHeadFinder(op.tlpParams.headFinder());
  for (  String treeText : treeStrings) {
    Tree tree=Tree.valueOf(treeText);
    Trees.convertToCoreLabels(tree);
    tree.percolateHeadAnnotations(binaryHeadFinder);
    List<Transition> transitions=CreateTransitionSequence.createTransitionSequence(tree,false);
    State state=ShiftReduceParser.initialStateFromGoldTagTree(tree);
    for (    Transition transition : transitions) {
      state=transition.apply(state);
    }
    assertEquals(tree,state.stack.peek());
  }
}
