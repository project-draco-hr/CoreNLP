{
  Counter<CandidatePhrase> sims=new ClassicCounter<CandidatePhrase>();
  double allMaxSim=Double.MIN_VALUE;
  for (  CandidatePhrase p : candidatePhrases) {
    Counter<Integer> feat=wordClassClustersForPhrase.get(p);
    if (feat == null) {
      feat=wordClass(p.getPhrase(),p.getPhraseLemma());
      wordClassClustersForPhrase.put(p,feat);
    }
    double maxSim=Double.MIN_VALUE;
    for (    CandidatePhrase pos : CollectionUtils.union(constVars.getLearnedWords(label).keySet(),constVars.getSeedLabelDictionary().get(label))) {
      double j=Counters.jaccardCoefficient(wordClassClustersForPhrase.get(pos),feat);
      System.out.println("clusters for positive phrase " + pos + " is "+ wordClassClustersForPhrase.get(pos)+ " and the features for unknown are "+ feat+ " for phrase "+ p);
      if (j > maxSim)       maxSim=j;
    }
    sims.setCount(p,maxSim);
    if (allMaxSim < maxSim)     allMaxSim=maxSim;
  }
  double percentage;
  if (allMaxSim == Double.MIN_VALUE) {
    Redwood.log(Redwood.DBG,"No similarity recorded between the positives and the unknown!");
    percentage=1.0;
  }
 else   percentage=0.8;
  Counters.retainBottom(sims,Math.min((int)(sims.size() * percentage),maxNum));
  System.out.println("choosing " + sims + " as the negative phrases");
  return sims.keySet();
}
