{
  StringBuffer s=new StringBuffer();
  char[] sArray=characters.toCharArray();
  int i;
  for (i=0; i < characters.length() && fm.stringWidth(s.toString()) < xPos; i++) {
    s.append(sArray[i]);
  }
  return i;
}
