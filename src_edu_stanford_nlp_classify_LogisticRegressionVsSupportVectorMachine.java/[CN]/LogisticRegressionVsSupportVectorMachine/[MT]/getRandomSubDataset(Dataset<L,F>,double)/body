{
  int newSize=(int)(p * dataset.size());
  Set<Integer> indicesToKeep=new HashSet<Integer>();
  int s=dataset.size();
  while (indicesToKeep.size() < newSize) {
    indicesToKeep.add(rand.nextInt(s));
  }
  int[][] newData=new int[newSize][];
  int[] newLabels=new int[newSize];
  int[][] data=dataset.getDataArray();
  int[] labels=dataset.getLabelsArray();
  int i=0;
  for (  int j : indicesToKeep) {
    newData[i]=data[j];
    newLabels[i]=labels[j];
    i++;
  }
  return new Dataset<L,F>(dataset.labelIndex,newLabels,dataset.featureIndex,newData);
}
