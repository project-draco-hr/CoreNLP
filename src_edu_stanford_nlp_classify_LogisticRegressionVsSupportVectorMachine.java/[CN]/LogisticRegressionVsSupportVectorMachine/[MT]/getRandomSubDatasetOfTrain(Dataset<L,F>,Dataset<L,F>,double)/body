{
  Dataset<L,F> tmpTrain=getRandomSubDataset(train,p);
  Dataset<L,F> tmpTest=test;
  Dataset<L,F> newTrain=new Dataset<L,F>();
  for (int i=0; i < tmpTrain.size(); i++) {
    newTrain.add(tmpTrain.getDatum(i));
  }
  newTrain.featureIndex.lock();
  Dataset<L,F> newTest=new Dataset<L,F>(tmpTest.size(),newTrain.featureIndex,newTrain.labelIndex);
  for (int i=0; i < tmpTest.size(); i++) {
    newTest.add(tmpTest.getDatum(i));
  }
  newTrain.featureIndex.unlock();
  return new Pair<Dataset<L,F>,Dataset<L,F>>(newTrain,newTest);
}
