{
  boolean done=false;
  int maxIters=limit;
  int iters=0;
  while (!done) {
    List<T> newExprs=new ArrayList<T>();
    boolean extracted=compositeExtractRule.extract(merged,newExprs);
    if (extracted) {
      annotateExpressions(merged,newExprs);
      newExprs=MatchedExpression.removeNullValues(newExprs);
      if (newExprs.size() > 0) {
        newExprs=MatchedExpression.removeNested(newExprs);
        newExprs=MatchedExpression.removeOverlapping(newExprs);
        merged=MatchedExpression.replaceMerged(merged,newExprs);
        newExprs.addAll(matchedExpressions);
        matchedExpressions=MatchedExpression.removeNested(newExprs);
        matchedExpressions=MatchedExpression.removeOverlapping(matchedExpressions);
      }
 else {
        extracted=false;
      }
    }
    done=!extracted;
    iters++;
    if (maxIters > 0 && iters >= maxIters) {
      logger.warning("Aborting application of composite rules: Maximum iteration " + maxIters + " reached");
      break;
    }
  }
  return new Pair<List<? extends CoreMap>,List<T>>(merged,matchedExpressions);
}
