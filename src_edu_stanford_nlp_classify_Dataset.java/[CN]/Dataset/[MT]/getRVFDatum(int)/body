{
  ClassicCounter<F> c=new ClassicCounter<>();
  int validFeatureCount=0;
  for (  int feature : data[index]) {
    if (feature < featureIndex.size())     validFeatureCount+=1;
  }
  int validFeatures[]=data[index];
  if (validFeatureCount != validFeatures.length) {
    validFeatures=new int[validFeatureCount];
    int i=0;
    for (    int feature : data[index]) {
      if (feature < featureIndex.size()) {
        validFeatures[i]=feature;
        i+=1;
      }
    }
  }
  for (  F key : featureIndex.objects(validFeatures)) {
    c.incrementCount(key);
  }
  return new RVFDatum<L,F>(c,labelIndex.get(labels[index]));
}
