{
  int newSize=(int)(p * size());
  Set<Integer> indicesToKeep=new HashSet<Integer>();
  Random r=new Random(seed);
  int s=size();
  while (indicesToKeep.size() < newSize) {
    indicesToKeep.add(r.nextInt(s));
  }
  int[][] newData=new int[newSize][];
  int[] newLabels=new int[newSize];
  int i=0;
  for (  int j : indicesToKeep) {
    newData[i]=data[j];
    newLabels[i]=labels[j];
    i++;
  }
  return new Dataset<L,F>(labelIndex,newLabels,featureIndex,newData);
}
