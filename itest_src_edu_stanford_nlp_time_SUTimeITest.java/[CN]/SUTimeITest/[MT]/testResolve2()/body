{
  String[] refTimes={"2011-06-03","2010-11-23","1988-01-16"};
  String[] refModifiers={"last","this","next","this coming"};
  String[] refExprs={"week","weekend","fortnight","month","quarter","year","decade","century","spring","summer","autumn","fall","winter","monday","tuesday","wednesday","thursday","friday","saturday","sunday","january","february","march","april","May","june","july","august","september","october","november","december"};
  String[][] expectedValuesPrev={{"2011-W21","2011-W21-WE","alt_value=\"~((2011-05-20,2011-06-03,P2W):P2W IN (2011-05-06,2011-06-03,P4W))\"","2011-05","2011-Q1","2010","200X","19XX","2010-SP","2010-SU","2010-FA","2010-FA","2010-WI","2011-05-23","2011-05-24","2011-05-25","2011-05-26","2011-05-27","2011-05-28","2011-05-29","2010-01","2010-02","2010-03","2010-04","2010-05","2010-06","2010-07","2010-08","2010-09","2010-10","2010-11","2010-12"},{"2010-W46","2010-W46-WE","alt_value=\"~((2010-11-09,2010-11-23,P2W):P2W IN (2010-10-26,2010-11-23,P4W))\"","2010-10","2010-Q3","2009","200X","19XX","2009-SP","2009-SU","2009-FA","2009-FA","2009-WI","2010-11-15","2010-11-16","2010-11-17","2010-11-18","2010-11-19","2010-11-20","2010-11-21","2009-01","2009-02","2009-03","2009-04","2009-05","2009-06","2009-07","2009-08","2009-09","2009-10","2009-11","2009-12"},{"1988-W01","1988-W01-WE","alt_value=\"~((1988-01-02,1988-01-16,P2W):P2W IN (1987-12-19,1988-01-16,P4W))\"","1987-12","1987-Q4","1987","197X","18XX","1987-SP","1987-SU","1987-FA","1987-FA","1987-WI","1988-01-04","1988-01-05","1988-01-06","1988-01-07","1988-01-08","1988-01-09","1988-01-10","1987-01","1987-02","1987-03","1987-04","1987-05","1987-06","1987-07","1987-08","1987-09","1987-10","1987-11","1987-12"}};
  String[][] expectedValuesThis={{"2011-W22","2011-W22-WE","alt_value=\"~((2011-05-27,2011-06-10,P2W):P2W IN (2011-05-20,2011-06-17,P4W))\"","2011-06","2011-Q2","2011","201X","20XX","2011-SP","2011-SU","2011-FA","2011-FA","2011-WI","2011-05-30","2011-05-31","2011-06-01","2011-06-02","2011-06-03","2011-06-04","2011-06-05","2011-01","2011-02","2011-03","2011-04","2011-05","2011-06","2011-07","2011-08","2011-09","2011-10","2011-11","2011-12"},{"2010-W47","2010-W47-WE","alt_value=\"~((2010-11-16,2010-11-30,P2W):P2W IN (2010-11-09,2010-12-07,P4W))\"","2010-11","2010-Q4","2010","201X","20XX","2010-SP","2010-SU","2010-FA","2010-FA","2010-WI","2010-11-22","2010-11-23","2010-11-24","2010-11-25","2010-11-26","2010-11-27","2010-11-28","2010-01","2010-02","2010-03","2010-04","2010-05","2010-06","2010-07","2010-08","2010-09","2010-10","2010-11","2010-12"},{"1988-W02","1988-W02-WE","alt_value=\"~((1988-01-09,1988-01-23,P2W):P2W IN (1988-01-02,1988-01-30,P4W))\"","1988-01","1988-Q1","1988","198X","19XX","1988-SP","1988-SU","1988-FA","1988-FA","1988-WI","1988-01-11","1988-01-12","1988-01-13","1988-01-14","1988-01-15","1988-01-16","1988-01-17","1988-01","1988-02","1988-03","1988-04","1988-05","1988-06","1988-07","1988-08","1988-09","1988-10","1988-11","1988-12"}};
  String[][] expectedValuesNext={{"2011-W23","2011-W23-WE","alt_value=\"~((2011-06-03,2011-06-17,P2W):P2W IN (2011-06-03,2011-07-01,P4W))\"","2011-07","2011-Q3","2012","202X","21XX","2012-SP","2012-SU","2012-FA","2012-FA","2012-WI","2011-06-06","2011-06-07","2011-06-08","2011-06-09","2011-06-10","2011-06-11","2011-06-12","2012-01","2012-02","2012-03","2012-04","2012-05","2012-06","2012-07","2012-08","2012-09","2012-10","2012-11","2012-12"},{"2010-W48","2010-W48-WE","alt_value=\"~((2010-11-23,2010-12-07,P2W):P2W IN (2010-11-23,2010-12-21,P4W))\"","2010-12","2011-Q1","2011","202X","21XX","2011-SP","2011-SU","2011-FA","2011-FA","2011-WI","2010-11-29","2010-11-30","2010-12-01","2010-12-02","2010-12-03","2010-12-04","2010-12-05","2011-01","2011-02","2011-03","2011-04","2011-05","2011-06","2011-07","2011-08","2011-09","2011-10","2011-11","2011-12"},{"1988-W03","1988-W03-WE","alt_value=\"~((1988-01-16,1988-01-30,P2W):P2W IN (1988-01-16,1988-02-13,P4W))\"","1988-02","1988-Q2","1989","199X","20XX","1989-SP","1989-SU","1989-FA","1989-FA","1989-WI","1988-01-18","1988-01-19","1988-01-20","1988-01-21","1988-01-22","1988-01-23","1988-01-24","1989-01","1989-02","1989-03","1989-04","1989-05","1989-06","1989-07","1989-08","1989-09","1989-10","1989-11","1989-12"}};
  String[][] expectedValuesNextImme={{"2011-W23","2011-W23-WE","2011-06-03/2011-06-17","2011-07","2011-Q3","2012","202X","21XX","2012-SP","2011-SU","2011-FA","2011-FA","2012-WI","2011-06-06","2011-06-07","2011-06-08","2011-06-09","2011-06-10","2011-06-04","2011-06-05","2012-01","2012-02","2012-03","2012-04","2012-05","2012-06","2011-07","2011-08","2011-09","2011-10","2011-11","2011-12"},{"2010-W48","2010-W48-WE","2010-11-23/2010-12-07","2010-12","2011-Q1","2011","202X","21XX","2011-SP","2011-SU","2011-FA","2011-FA","2011-WI","2010-11-29","2010-11-30","2010-11-24","2010-11-25","2010-11-26","2010-11-27","2010-11-28","2011-01","2011-02","2011-03","2011-04","2011-05","2011-06","2011-07","2011-08","2011-09","2011-10","2011-11","2010-12"},{"1988-W03","1988-W03-WE","1988-01-16/1988-01-30","1988-02","1988-Q2","1989","199X","20XX","1988-SP","1988-SU","1988-FA","1988-FA","1989-WI","1988-01-18","1988-01-19","1988-01-20","1988-01-21","1988-01-22","1988-01-23","1988-01-17","1989-01","1988-02","1988-03","1988-04","1988-05","1988-06","1988-07","1988-08","1988-09","1988-10","1988-11","1988-12"}};
  String[][] expectedValuesPrevImme={{"2011-W21","2011-W21-WE","2011-05-20/2011-06-03","2011-05","2011-Q1","2010","200X","19XX","2010-SP","2010-SU","2010-FA","2010-FA","2010-WI","2011-05-30","2011-05-31","2011-06-01","2011-06-02","2011-05-27","2011-05-28","2011-05-29","2011-01","2011-02","2011-03","2011-04","2011-05","2010-06","2010-07","2010-08","2010-09","2010-10","2010-11","2010-12"},{"2010-W46","2010-W46-WE","2010-11-09/2010-11-23","2010-10","2010-Q3","2009","200X","19XX","2010-SP","2010-SU","2010-FA","2010-FA","2009-WI","2010-11-22","2010-11-16","2010-11-17","2010-11-18","2010-11-19","2010-11-20","2010-11-21","2010-01","2010-02","2010-03","2010-04","2010-05","2010-06","2010-07","2010-08","2010-09","2010-10","2009-11","2009-12"},{"1988-W01","1988-W01-WE","1988-01-02/1988-01-16,P2W","1987-12","1987-Q4","1987","197X","18XX","1987-SP","1987-SU","1987-FA","1987-FA","1987-WI","1988-01-11","1988-01-12","1988-01-13","1988-01-14","1988-01-15","1988-01-09","1988-01-10","1987-01","1987-02","1987-03","1987-04","1987-05","1987-06","1987-07","1987-08","1987-09","1987-10","1987-11","1987-12"}};
  String[][][] expectedValuesAll={expectedValuesPrev,expectedValuesThis,expectedValuesNext,expectedValuesNextImme};
  for (int i=0; i < refTimes.length; i++) {
    for (int j=0; j < refModifiers.length; j++) {
      String refTime=refTimes[i];
      String refMod=refModifiers[j];
      StringBuilder sb=new StringBuilder();
      for (      String s : refExprs) {
        sb.append("It happened " + refMod + " "+ s+ ". ");
      }
      String testText=sb.toString();
      String[] expectedValues=expectedValuesAll[j][i];
      Timex[] expectedTimexes=new Timex[refExprs.length];
      for (int k=0; k < refExprs.length; k++) {
        String v=expectedValues[k];
        String expr=refMod + " " + refExprs[k];
        if (v.contains("=")) {
          expectedTimexes[k]=Timex.fromXml("<TIMEX3 tid=\"t" + (k + 1) + "\" "+ v+ " type=\"DATE\">"+ expr+ "</TIMEX3>");
        }
 else {
          expectedTimexes[k]=Timex.fromXml("<TIMEX3 tid=\"t" + (k + 1) + "\" value=\""+ v+ "\" type=\"DATE\">"+ expr+ "</TIMEX3>");
        }
      }
      Annotation documentWithRefTime=createDocument(testText,refTime);
      TimeAnnotator sutime=getTimeAnnotator();
      sutime.annotate(documentWithRefTime);
      int k=0;
      for (      CoreMap timexAnn : documentWithRefTime.get(TimeAnnotations.TimexAnnotations.class)) {
        Timex expectedTimex=expectedTimexes[k];
        testTimex(testText,expectedTimex.text(),expectedTimex,timexAnn);
        k++;
      }
      assertEquals(expectedTimexes.length,k);
    }
  }
}
