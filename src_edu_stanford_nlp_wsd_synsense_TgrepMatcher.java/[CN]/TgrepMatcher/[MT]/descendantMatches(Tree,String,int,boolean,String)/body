{
  Tree[] kids=tree.children();
  for (  Tree kid : kids) {
    if (matches(kid,pattern,position)) {
      return true;
    }
    if (!kid.isLeaf() && matches(kid,viaPattern) && descendantMatches(kid,pattern,position,leftmost,viaPattern)) {
      return true;
    }
    if (leftmost) {
      return false;
    }
  }
  return false;
}
