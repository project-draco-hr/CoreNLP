{
  if (impl.getSentenceCount() > 0 && impl.getSentence(0).hasBasicDependencies()) {
    return this;
  }
  runPOS(props);
  Annotator depparse=props == EMPTY_PROPS ? defaultDepparse.get() : getOrCreate(AnnotatorFactories.dependencies(props,backend));
  Annotation ann=asAnnotation();
  depparse.annotate(ann);
synchronized (serializer) {
    for (int i=0; i < sentences.size(); ++i) {
      CoreMap sentence=ann.get(CoreAnnotations.SentencesAnnotation.class).get(i);
      sentences.get(i).updateDependencies(ProtobufAnnotationSerializer.toProto(sentence.get(SemanticGraphCoreAnnotations.BasicDependenciesAnnotation.class)),ProtobufAnnotationSerializer.toProto(sentence.get(SemanticGraphCoreAnnotations.CollapsedDependenciesAnnotation.class)),ProtobufAnnotationSerializer.toProto(sentence.get(SemanticGraphCoreAnnotations.CollapsedCCProcessedDependenciesAnnotation.class)));
    }
  }
  return this;
}
