{
  if (t.isLeaf())   return;
  Tree[] kids=t.children();
  List<Tree> newKids=new ArrayList<Tree>(kids.length);
  for (int i=0, n=kids.length; i < n; i++) {
    if (kids[i] != node) {
      newKids.add(kids[i]);
      replaceNode(node,node1,kids[i]);
    }
 else {
      newKids.add(node1);
    }
  }
  t.setChildren(newKids);
}
