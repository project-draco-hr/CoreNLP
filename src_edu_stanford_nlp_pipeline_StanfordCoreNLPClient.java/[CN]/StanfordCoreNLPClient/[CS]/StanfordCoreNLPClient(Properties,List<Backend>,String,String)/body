{
  this.properties=properties;
  Properties serverProperties=new Properties();
  Enumeration<?> keys=properties.propertyNames();
  while (keys.hasMoreElements()) {
    String key=keys.nextElement().toString();
    serverProperties.setProperty(key,properties.getProperty(key));
  }
  Collections.shuffle(backends,new Random(System.currentTimeMillis()));
  this.scheduler=new BackendScheduler(backends);
  this.apiKey=apiKey;
  this.apiSecret=apiSecret;
  serverProperties.setProperty("inputFormat","serialized");
  serverProperties.setProperty("outputFormat","serialized");
  serverProperties.setProperty("inputSerializer",ProtobufAnnotationSerializer.class.getName());
  serverProperties.setProperty("outputSerializer",ProtobufAnnotationSerializer.class.getName());
  List<String> jsonProperties=new ArrayList<>();
  keys=serverProperties.propertyNames();
  while (keys.hasMoreElements()) {
    Object key=keys.nextElement();
    jsonProperties.add("\"" + JSONOutputter.cleanJSON(key.toString()) + "\": \""+ JSONOutputter.cleanJSON(serverProperties.getProperty(key.toString()))+ "\"");
  }
  this.propsAsJSON="{ " + StringUtils.join(jsonProperties,", ") + " }";
  this.scheduler.start();
}
