{
  if (t.isLeaf()) {
    return;
  }
  if (attach && puncFilter.accept(t.headWordNode().label().value())) {
    TreeGraphNode parent=t.parent().highestNodeWithSameHead();
    if (!basicGraph.isEdge(parent,t) && basicGraph.getShortestPath(root,t,true) == null) {
      basicGraph.add(parent,t,GrammaticalRelation.DEPENDENT);
    }
  }
  StackTraceElement[] trace=Thread.currentThread().getStackTrace();
  if (trace.length > 500) {
    System.err.println("On the way to stack over flow where basicgraph is !!" + basicGraph);
    System.err.println(Arrays.toString(trace));
    throw new StackOverflowError();
  }
  for (  TreeGraphNode kid : t.children()) {
    attachStrandedNodes(kid,root,(kid.headWordNode() != t.headWordNode()),puncFilter,basicGraph);
  }
}
