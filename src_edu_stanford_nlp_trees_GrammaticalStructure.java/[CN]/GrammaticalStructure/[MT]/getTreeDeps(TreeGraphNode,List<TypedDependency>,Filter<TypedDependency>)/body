{
  if (t.isPhrasal()) {
    Map<Class<? extends GrammaticalRelationAnnotation>,Set<TreeGraphNode>> depMap=getAllDependents(t);
    for (    Class<? extends GrammaticalRelationAnnotation> depName : depMap.keySet()) {
      for (      TreeGraphNode depNode : depMap.get(depName)) {
        TreeGraphNode gov=t.headWordNode();
        TreeGraphNode dep=depNode.headWordNode();
        if (gov != dep) {
          List<GrammaticalRelation> rels=getListGrammaticalRelation(t,depNode);
          if (!rels.isEmpty()) {
            for (            GrammaticalRelation rel : rels) {
              TypedDependency newDep=new TypedDependency(rel,gov,dep);
              if (!basicDep.contains(newDep) && puncTypedDepFilter.accept(newDep)) {
                newDep.setExtra();
                basicDep.add(newDep);
              }
            }
          }
        }
      }
    }
    for (    Tree kid : t.children()) {
      getTreeDeps((TreeGraphNode)kid,basicDep,puncTypedDepFilter);
    }
  }
}
