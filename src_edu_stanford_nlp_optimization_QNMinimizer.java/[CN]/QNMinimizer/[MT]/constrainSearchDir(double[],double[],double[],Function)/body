{
  Set<Integer> paramRange=null;
  if (func instanceof HasL1ParamRange) {
    paramRange=((HasL1ParamRange)func).getL1ParamRange(x);
  }
 else {
    paramRange=new HashSet<Integer>(x.length);
    for (int i=0; i < x.length; i++)     paramRange.add(i);
  }
  for (  int i : paramRange) {
    if (dir[i] * fg[i] >= 0) {
      dir[i]=0;
    }
  }
}
