{
  if (input == null)   return null;
  Annotation anno=input.annotation;
  addMissingAnnotation(anno);
  boolean isChineseConllNonNW=input.conllDoc != null && CorefProperties.getLanguage(props) == Locale.CHINESE && !input.conllDoc.documentID.contains("nw");
  if (isChineseConllNonNW)   props.setProperty("removeNested","true");
  List<List<Mention>> mentions=md.findMentions(anno,dict,props);
  Document doc=new Document(input,mentions);
  if (input.goldMentions != null)   findGoldMentionHeads(doc);
  Preprocessor.preprocess(doc,dict,singletonPredictor,headFinder);
  return doc;
}
