{
  if (input == null)   return null;
  Annotation anno=input.annotation;
  addMissingAnnotation(anno);
  if (CorefProperties.getLanguage(props) == Locale.CHINESE) {
    props.setProperty("removeNested",String.valueOf(!input.conllDoc.documentID.contains("nw")));
  }
  List<List<Mention>> mentions=md.findMentions(anno,dict,props);
  Document doc=new Document(input,mentions);
  if (input.goldMentions != null)   findGoldMentionHeads(doc);
  Preprocessor.preprocess(doc,dict,singletonPredictor,headFinder);
  return doc;
}
