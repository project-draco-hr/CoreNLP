{
  if (t.isLeaf())   return t.treeFactory().newLeaf(transformLabel(t,root));
 else {
    Tree[] kids=t.children();
    List<Tree> newKids=new ArrayList<Tree>(kids.length);
    for (    Tree kid : kids) {
      newKids.add(apply(kid,root));
    }
    return t.treeFactory().newTreeNode(transformLabel(t,root),newKids);
  }
}
