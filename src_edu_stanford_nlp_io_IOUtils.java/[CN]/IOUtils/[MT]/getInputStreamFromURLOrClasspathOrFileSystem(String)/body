{
  InputStream in;
  if (textFileOrUrl.matches("https?://.*")) {
    URL u=new URL(textFileOrUrl);
    URLConnection uc=u.openConnection();
    in=uc.getInputStream();
  }
 else {
    try {
      in=findStreamInClasspathOrFileSystem(textFileOrUrl);
    }
 catch (    FileNotFoundException e) {
      try {
        URL u=new URL(textFileOrUrl);
        URLConnection uc=u.openConnection();
        in=uc.getInputStream();
      }
 catch (      IOException e2) {
        throw new IOException("Unable to resolve \"" + textFileOrUrl + "\" as either "+ "class path, filename or URL");
      }
    }
  }
  if (textFileOrUrl.endsWith(".gz")) {
    in=new GZIPInputStream(in,GZIP_FILE_BUFFER_SIZE);
  }
 else {
    in=new BufferedInputStream(in);
  }
  return in;
}
