{
  if (flags.doFE) {
    doc.get(0).set(DomainAnnotation.class,domainName);
  }
  String possibleAnswers=(answersByDomain == null ? null : answersByDomain.get(domainName));
  if (possibleAnswers != null) {
    for (    CoreLabel word : doc) {
      word.set(PossibleAnswersAnnotation.class,possibleAnswers);
    }
  }
  metaInfo.lock();
  CliqueDataset dataset=new CliqueDataset(metaInfo,flags,doc);
  metaInfo.unlock();
  QueriableSequenceModel model=provider.getModel(dataset);
  double[] weights;
  if (hierarchicalWeights == null) {
    weights=this.weights;
  }
 else {
    if (!hierarchicalWeights.containsKey(domainName)) {
      System.err.println("cannot find weights for domain name: " + domainName + ".  Using top level weights instead");
      domainName=null;
    }
    weights=hierarchicalWeights.get(domainName);
  }
  System.err.println(weights.length);
  model.setParameters(weights);
  return model;
}
