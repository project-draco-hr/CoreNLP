{
  float[][] newWeights=new float[map.length][];
  int index=0;
  for (int i=0; i < map.length; i++) {
    newWeights[i]=new float[labelIndices[map[i]].size()];
    System.arraycopy(weights,index,newWeights[i],0,labelIndices[map[i]].size());
    index+=labelIndices[map[i]].size();
  }
  return newWeights;
}
