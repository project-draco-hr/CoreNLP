{
  String shape;
  if (augmentedDateChars && dateCharsPlus.matcher(input).matches()) {
    shape="D";
  }
 else   if (dateChars.matcher(input).matches()) {
    shape="D";
  }
 else   if (numberChars.matcher(input).matches()) {
    shape="N";
  }
 else   if (letterChars.matcher(input).matches()) {
    shape="L";
  }
 else   if (periodChars.matcher(input).matches()) {
    shape="P";
  }
 else   if (separatingPuncChars.matcher(input).matches()) {
    shape="S";
  }
 else   if (ambiguousPuncChars.matcher(input).matches()) {
    shape="A";
  }
 else   if (useMidDotShape && midDotPattern.matcher(input).matches()) {
    shape="M";
  }
 else {
    shape="C";
  }
  return shape;
}
