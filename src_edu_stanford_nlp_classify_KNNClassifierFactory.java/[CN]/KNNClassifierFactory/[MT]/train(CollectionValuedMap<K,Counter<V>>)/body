{
  KNNClassifier<K,V> classifier=new KNNClassifier<K,V>(k,weightedVotes,l2NormalizeVectors);
  Collection<RVFDatum<K,V>> instances=new ArrayList<RVFDatum<K,V>>();
  for (  K label : vecBag.keySet()) {
    RVFDatum<K,V> datum;
    for (    Counter<V> vector : vecBag.get(label)) {
      if (l2NormalizeVectors) {
        datum=new RVFDatum<K,V>(Counters.L2Normalize(new ClassicCounter<V>(vector)),label);
      }
 else {
        datum=new RVFDatum<K,V>(vector,label);
      }
      instances.add(datum);
    }
  }
  classifier.addInstances(instances);
  return classifier;
}
