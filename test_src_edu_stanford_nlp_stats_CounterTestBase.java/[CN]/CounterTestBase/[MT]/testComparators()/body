{
  c.clear();
  c.setCount("b",3.0);
  c.setCount("p",-5.0);
  c.setCount("a",2.0);
  c.setCount("s",4.0);
  List<String> list=new ArrayList<String>(c.keySet());
  Comparator<String> cmp=Counters.toComparator(c);
  Collections.sort(list,cmp);
  assertEquals(4,list.size());
  assertEquals("p",list.get(0));
  assertEquals("a",list.get(1));
  assertEquals("b",list.get(2));
  assertEquals("s",list.get(3));
  Comparator<String> cmp2=Counters.toComparatorDescending(c);
  Collections.sort(list,cmp2);
  assertEquals(4,list.size());
  assertEquals("p",list.get(3));
  assertEquals("a",list.get(2));
  assertEquals("b",list.get(1));
  assertEquals("s",list.get(0));
  Comparator<String> cmp3=Counters.toComparator(c,true,true);
  Collections.sort(list,cmp3);
  assertEquals(4,list.size());
  assertEquals("p",list.get(3));
  assertEquals("a",list.get(0));
  assertEquals("b",list.get(1));
  assertEquals("s",list.get(2));
  Comparator<String> cmp4=Counters.toComparator(c,false,true);
  Collections.sort(list,cmp4);
  assertEquals(4,list.size());
  assertEquals("p",list.get(0));
  assertEquals("a",list.get(3));
  assertEquals("b",list.get(2));
  assertEquals("s",list.get(1));
  Comparator<String> cmp5=Counters.toComparator(c,false,false);
  Collections.sort(list,cmp5);
  assertEquals(4,list.size());
  assertEquals("p",list.get(3));
  assertEquals("a",list.get(2));
  assertEquals("b",list.get(1));
  assertEquals("s",list.get(0));
}
