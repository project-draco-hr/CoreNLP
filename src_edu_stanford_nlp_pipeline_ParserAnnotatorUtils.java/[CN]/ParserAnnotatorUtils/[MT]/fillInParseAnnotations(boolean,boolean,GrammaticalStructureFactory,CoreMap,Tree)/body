{
  ParserAnnotatorUtils.convertToCoreLabels(tree);
  tree.indexSpans(0);
  sentence.set(TreeAnnotation.class,tree);
  if (verbose) {
    System.err.println("Tree is:");
    tree.pennPrint(System.err);
  }
  if (buildGraphs) {
    SemanticGraph deps=generateCollapsedDependencies(gsf.newGrammaticalStructure(tree));
    SemanticGraph uncollapsedDeps=generateUncollapsedDependencies(gsf.newGrammaticalStructure(tree));
    SemanticGraph ccDeps=generateCCProcessedDependencies(gsf.newGrammaticalStructure(tree));
    if (verbose) {
      System.err.println("SDs:");
      System.err.println(deps.toString("plain"));
    }
    sentence.set(SemanticGraphCoreAnnotations.CollapsedDependenciesAnnotation.class,deps);
    sentence.set(SemanticGraphCoreAnnotations.BasicDependenciesAnnotation.class,uncollapsedDeps);
    sentence.set(SemanticGraphCoreAnnotations.CollapsedCCProcessedDependenciesAnnotation.class,ccDeps);
  }
  setMissingTags(sentence,tree);
}
