{
  Trees.convertToCoreLabels(tree);
  tree.indexSpans(0);
  sentence.set(TreeCoreAnnotations.TreeAnnotation.class,tree);
  if (verbose) {
    System.err.println("Tree is:");
    tree.pennPrint(System.err);
  }
  if (buildGraphs) {
    SemanticGraph deps=SemanticGraphFactory.generateCollapsedDependencies(gsf.newGrammaticalStructure(tree));
    SemanticGraph uncollapsedDeps=SemanticGraphFactory.generateUncollapsedDependencies(gsf.newGrammaticalStructure(tree));
    SemanticGraph ccDeps=SemanticGraphFactory.generateCCProcessedDependencies(gsf.newGrammaticalStructure(tree));
    if (verbose) {
      System.err.println("SDs:");
      System.err.println(deps.toString(SemanticGraph.OutputFormat.LIST));
    }
    sentence.set(SemanticGraphCoreAnnotations.CollapsedDependenciesAnnotation.class,deps);
    sentence.set(SemanticGraphCoreAnnotations.BasicDependenciesAnnotation.class,uncollapsedDeps);
    sentence.set(SemanticGraphCoreAnnotations.CollapsedCCProcessedDependenciesAnnotation.class,ccDeps);
  }
  setMissingTags(sentence,tree);
}
