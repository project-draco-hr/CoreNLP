{
  int index=0;
  for (int i=0; i < map.length; i++) {
    int labelSize=labelIndices.get(map[i]).size();
    try {
      System.arraycopy(weights,index,newWeights[i],0,labelSize);
    }
 catch (    Exception ex) {
      System.err.println("weights: " + weights);
      System.err.println("newWeights[" + i + "]: "+ newWeights[i]);
      throw new RuntimeException(ex);
    }
    index+=labelSize;
  }
}
