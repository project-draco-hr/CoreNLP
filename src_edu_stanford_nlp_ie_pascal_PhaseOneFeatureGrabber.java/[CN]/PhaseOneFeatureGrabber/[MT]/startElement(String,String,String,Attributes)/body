{
  if (DEBUG)   System.err.println("starting element: " + qName);
  String kind=attributes.getValue("kind");
  if (kind == null)   kind=EMPTY_VALUE;
  String string=EMPTY_VALUE;
  String category=EMPTY_VALUE;
  String orth=EMPTY_VALUE;
  if (qName.equalsIgnoreCase("spacetoken")) {
    inURL=false;
    if (kind.equals("control")) {
      isNewLine=true;
      string="*NewLine*";
    }
  }
  if ((qName.equalsIgnoreCase("token") || isNewLine)) {
    assert(currentToken == null);
    if (qName.equalsIgnoreCase("token")) {
      string=attributes.getValue("string");
      if (string == null)       string=EMPTY_VALUE;
      if (tagURLs && (string.equalsIgnoreCase("http") || string.equalsIgnoreCase("www"))) {
        inURL=true;
      }
      category=attributes.getValue("category");
      if (category == null)       category=EMPTY_VALUE;
      orth=attributes.getValue("orth");
      if (orth == null)       orth=EMPTY_VALUE;
    }
    currentToken=new CoreLabel();
    currentToken.set(TextAnnotation.class,string);
    currentToken.set(PartOfSpeechAnnotation.class,category);
    currentToken.set(ShapeAnnotation.class,orth);
    currentToken.set(LastTaggedAnnotation.class,lastTagged);
    if (tagURLs) {
      currentToken.set(IsURLAnnotation.class,(inURL ? "isURL" : "isnotURL"));
    }
  }
 else   if (labelTags.containsKey(qName)) {
    pascalTag=qName;
  }
 else   if (entityTags.containsKey(qName)) {
    assert(wrapper.equals(EMPTY_VALUE));
    entityRule=attributes.getValue("rule1");
    if (entityRule == null || entityRule.trim().equals(""))     entityRule=EMPTY_VALUE;
    if (currentToken != null) {
      if (DEBUG)       System.err.println("found " + qName + " inside buffer");
      wrapperInsideToken=true;
    }
    if (DEBUG)     System.err.println("Setting wrapper to:" + qName);
    wrapper=qName;
  }
}
