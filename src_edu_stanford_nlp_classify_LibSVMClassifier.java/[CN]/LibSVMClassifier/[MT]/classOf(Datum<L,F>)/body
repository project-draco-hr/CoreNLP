{
  Collection<F> features=example.asFeatures();
  ArrayList<svm_node> nodes=new ArrayList<svm_node>();
  for (  F feature : features) {
    Pair<Integer,Double> indexValue=getIndexAndValue(feature,example);
    nodes.add(newSVMnode(indexValue.first(),indexValue.second()));
  }
  Collections.sort(nodes,new NodeComparator());
  svm_node[] nodeArray=new svm_node[nodes.size()];
  nodes.toArray(nodeArray);
  double predict=svm.svm_predict(model,nodeArray);
  int prediction=(int)Math.round(predict);
  if (model.param.svm_type == svm_parameter.ONE_CLASS) {
    if (prediction == -1)     return null;
 else     return labelIndex.get(0);
  }
  return labelIndex.get(prediction);
}
