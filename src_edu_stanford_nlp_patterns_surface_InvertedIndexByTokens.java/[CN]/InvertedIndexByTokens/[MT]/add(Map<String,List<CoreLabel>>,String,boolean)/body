{
  for (  Map.Entry<String,List<CoreLabel>> sEn : sents.entrySet()) {
    for (    CoreLabel l : sEn.getValue()) {
      String w=l.word();
      if (indexLemma)       w=l.lemma();
      if (convertToLowercase)       w=w.toLowerCase();
      w=w.replaceAll("/","\\\\/");
      Hashtable<String,Set<String>> t=index.get(w);
      if (t == null)       t=new Hashtable<String,Set<String>>();
      Set<String> sentids=t.get(filename);
      if (sentids == null) {
        sentids=new HashSet<String>();
      }
      numAllEntries=numAllEntries - sentids.size();
      sentids.add(sEn.getKey());
      t.put(filename,sentids);
      numAllEntries=numAllEntries + sentids.size();
      index.put(w,t);
    }
  }
}
