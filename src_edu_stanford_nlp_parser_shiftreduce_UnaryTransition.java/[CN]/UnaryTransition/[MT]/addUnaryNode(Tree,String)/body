{
  if (!(top.label() instanceof CoreLabel)) {
    throw new IllegalArgumentException("Stack should have CoreLabel nodes");
  }
  CoreLabel headLabel=(CoreLabel)top.label();
  CoreLabel production=new CoreLabel();
  production.setValue(label);
  production.set(TreeCoreAnnotations.HeadWordAnnotation.class,headLabel.get(TreeCoreAnnotations.HeadWordAnnotation.class));
  production.set(TreeCoreAnnotations.HeadTagAnnotation.class,headLabel.get(TreeCoreAnnotations.HeadTagAnnotation.class));
  Tree newTop=new LabeledScoredTreeNode(production);
  newTop.addChild(top);
  return newTop;
}
