{
  originalTreeString=tree.toString();
  this.tree=tree;
  this.foot=findFootNode(tree);
  if (foot == null && mustHaveFoot) {
    throw new RuntimeException("Error -- no foot node found for " + originalTreeString);
  }
  namesToNodes=new HashMap<String,Tree>();
  nodesToNames=new IdentityHashMap<Tree,String>();
  initializeNamesNodesMaps(tree);
}
