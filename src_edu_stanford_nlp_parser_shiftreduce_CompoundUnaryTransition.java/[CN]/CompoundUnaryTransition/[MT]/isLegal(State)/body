{
  if (state.finished) {
    return false;
  }
  if (state.stack.size() == 0) {
    return false;
  }
  Tree top=state.stack.peek();
  if (top.children().length == 1 && !top.isPreTerminal()) {
    return false;
  }
  if (top.label().value().equals(labels[0])) {
    return false;
  }
  if (top.label().value().startsWith("@") && !labels[labels.length - 1].equals(top.label().value().substring(1))) {
    return false;
  }
  return true;
}
