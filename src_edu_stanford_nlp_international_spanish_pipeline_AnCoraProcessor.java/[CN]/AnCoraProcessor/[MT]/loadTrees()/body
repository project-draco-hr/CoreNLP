{
  boolean ner=PropertiesUtils.getBool(options,"ner",false);
  final String encoding=new SpanishTreebankLanguagePack().getEncoding();
  final SpanishXMLTreeReaderFactory trf=new SpanishXMLTreeReaderFactory(true,true,ner,false);
  MulticoreWrapper<File,Pair<TwoDimensionalCounter<String,String>,List<Tree>>> wrapper=new MulticoreWrapper<File,Pair<TwoDimensionalCounter<String,String>,List<Tree>>>(Runtime.getRuntime().availableProcessors(),new XMLTreeProcessor(trf,encoding));
  for (  final File file : inputFiles) {
    wrapper.put(file);
    while (wrapper.peek()) {
      Pair<TwoDimensionalCounter<String,String>,List<Tree>> result=wrapper.poll();
      unigramTagger=Counters.add(unigramTagger,result.first());
      trees.addAll(result.second());
    }
  }
  wrapper.join();
  while (wrapper.peek()) {
    Pair<TwoDimensionalCounter<String,String>,List<Tree>> result=wrapper.poll();
    unigramTagger=Counters.add(unigramTagger,result.first());
    trees.addAll(result.second());
  }
  return trees;
}
