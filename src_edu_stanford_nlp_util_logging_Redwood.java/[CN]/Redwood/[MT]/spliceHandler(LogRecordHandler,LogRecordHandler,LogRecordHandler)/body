{
  RecordHandlerTree p=handlers.find(parent);
  if (p != null) {
    p.addChild(toAdd);
    Iterator<RecordHandlerTree> iter=p.children();
    RecordHandlerTree removed=null;
    while (iter.hasNext()) {
      RecordHandlerTree cand=iter.next();
      if (cand.head() == grandchild) {
        removed=cand;
        iter.remove();
      }
    }
    if (removed != null) {
      p.find(toAdd).addChildTree(removed);
    }
  }
 else {
    throw new IllegalArgumentException("No such parent handler: " + parent);
  }
}
