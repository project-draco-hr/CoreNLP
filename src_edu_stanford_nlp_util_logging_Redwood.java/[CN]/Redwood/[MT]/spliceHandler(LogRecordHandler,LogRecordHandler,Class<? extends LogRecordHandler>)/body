{
  RecordHandlerTree p=handlers.find(parent);
  if (p != null) {
    p.addChild(toAdd);
    Iterator<RecordHandlerTree> iter=p.children();
    List<RecordHandlerTree> lst=new ArrayList<RecordHandlerTree>();
    while (iter.hasNext()) {
      RecordHandlerTree cand=iter.next();
      if (grandchild.isAssignableFrom(cand.head().getClass())) {
        lst.add(cand);
        iter.remove();
      }
    }
    for (    RecordHandlerTree gc : lst) {
      p.find(toAdd).addChildTree(gc);
    }
  }
 else {
    throw new IllegalArgumentException("No such parent handler: " + parent);
  }
}
