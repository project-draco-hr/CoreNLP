{
  final long threadId=Thread.currentThread().getId();
  Runnable finish=new Runnable(){
    public void run(){
      releaseThreadControl(threadId);
    }
  }
;
  if (isThreaded) {
    attemptThreadControl(threadId,finish);
  }
 else {
    throw new IllegalStateException("finishThreads() called outside of threaded environment");
  }
}
