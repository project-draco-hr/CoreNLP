{
  if (train) {
    if (flags.trainFiles == null) {
      return getObjectBank(new File(flags.trainFile));
    }
  }
 else {
    if (flags.testFiles == null) {
      return getObjectBank(new File(flags.testFile));
    }
  }
  try {
    File path=new File((train ? flags.baseTrainDir : flags.baseTestDir));
    FileFilter filter=new RegExFileFilter(Pattern.compile((train ? flags.trainFiles : flags.testFiles)));
    File[] origFiles=path.listFiles(filter);
    Collection<File> files=new ArrayList<File>();
    for (    File file : origFiles) {
      if (file.isFile()) {
        files.add(file);
      }
    }
    System.err.println(files.size() + " files.");
    return getObjectBank(new ResettableReaderIteratorFactory(files,flags.inputEncoding));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
