{
  List<String> features=Generics.newArrayList();
  final TreeShapedStack<Tree> stack=state.stack;
  final List<Tree> sentence=state.sentence;
  final int tokenPosition=state.tokenPosition;
  CoreLabel s0Label=getStackLabel(stack,0);
  CoreLabel s1Label=getStackLabel(stack,1);
  CoreLabel s2Label=getStackLabel(stack,2);
  CoreLabel s3Label=getStackLabel(stack,3);
  CoreLabel s0LLabel=getStackLabel(stack,0,Transition.LEFT);
  CoreLabel s0RLabel=getStackLabel(stack,0,Transition.RIGHT);
  CoreLabel s0ULabel=getStackLabel(stack,0,Transition.UNARY);
  CoreLabel s0LLLabel=getStackLabel(stack,0,Transition.LEFT,Transition.LEFT);
  CoreLabel s0LRLabel=getStackLabel(stack,0,Transition.LEFT,Transition.RIGHT);
  CoreLabel s0LULabel=getStackLabel(stack,0,Transition.LEFT,Transition.UNARY);
  CoreLabel s0RLLabel=getStackLabel(stack,0,Transition.RIGHT,Transition.LEFT);
  CoreLabel s0RRLabel=getStackLabel(stack,0,Transition.RIGHT,Transition.RIGHT);
  CoreLabel s0RULabel=getStackLabel(stack,0,Transition.RIGHT,Transition.UNARY);
  CoreLabel s0ULLabel=getStackLabel(stack,0,Transition.UNARY,Transition.LEFT);
  CoreLabel s0URLabel=getStackLabel(stack,0,Transition.UNARY,Transition.RIGHT);
  CoreLabel s0UULabel=getStackLabel(stack,0,Transition.UNARY,Transition.UNARY);
  CoreLabel s1LLabel=getStackLabel(stack,1,Transition.LEFT);
  CoreLabel s1RLabel=getStackLabel(stack,1,Transition.RIGHT);
  CoreLabel s1ULabel=getStackLabel(stack,1,Transition.UNARY);
  CoreLabel q0Label=getQueueLabel(sentence,tokenPosition,0);
  CoreLabel q1Label=getQueueLabel(sentence,tokenPosition,1);
  CoreLabel q2Label=getQueueLabel(sentence,tokenPosition,2);
  CoreLabel q3Label=getQueueLabel(sentence,tokenPosition,3);
  CoreLabel qP1Label=getQueueLabel(sentence,tokenPosition,-1);
  CoreLabel qP2Label=getQueueLabel(sentence,tokenPosition,-2);
  addUnaryStackFeatures(features,s0Label,"S0C-","S0WT-","S0T-","S0WC-","S0TC-");
  addUnaryStackFeatures(features,s1Label,"S1C-","S1WT-","S1T-","S1WC-","S1TC-");
  addUnaryStackFeatures(features,s2Label,"S2C-","S2WT-","S2T-","S2WC-","S2TC-");
  addUnaryStackFeatures(features,s3Label,"S3C-","S3WT-","S3T-","S3WC-","S3TC-");
  addUnaryStackFeatures(features,s0LLabel,"S0LC-","S0LWT-","S0LT-","S0LWC-","S0LTC-");
  addUnaryStackFeatures(features,s0RLabel,"S0RC-","S0RWT-","S0RT-","S0RWC-","S0RTC-");
  addUnaryStackFeatures(features,s0ULabel,"S0UC-","S0UWT-","S0UT-","S0UWC-","S0UTC-");
  addUnaryStackFeatures(features,s0LLLabel,"S0LLC-","S0LLWT-","S0LLT-","S0LLWC-","S0LLTC-");
  addUnaryStackFeatures(features,s0LRLabel,"S0LRC-","S0LRWT-","S0LRT-","S0LRWC-","S0LRTC-");
  addUnaryStackFeatures(features,s0LULabel,"S0LUC-","S0LUWT-","S0LUT-","S0LUWC-","S0LUTC-");
  addUnaryStackFeatures(features,s0RLLabel,"S0RLC-","S0RLWT-","S0RLT-","S0RLWC-","S0RLTC-");
  addUnaryStackFeatures(features,s0RRLabel,"S0RRC-","S0RRWT-","S0RRT-","S0RRWC-","S0RRTC-");
  addUnaryStackFeatures(features,s0RULabel,"S0RUC-","S0RUWT-","S0RUT-","S0RUWC-","S0RUTC-");
  addUnaryStackFeatures(features,s0ULLabel,"S0ULC-","S0ULWT-","S0ULT-","S0ULWC-","S0ULTC-");
  addUnaryStackFeatures(features,s0URLabel,"S0URC-","S0URWT-","S0URT-","S0URWC-","S0URTC-");
  addUnaryStackFeatures(features,s0UULabel,"S0UUC-","S0UUWT-","S0UUT-","S0UUWC-","S0UUTC-");
  addUnaryStackFeatures(features,s1LLabel,"S1LC-","S1LWT-","S1LT-","S1LWC-","S1LTC-");
  addUnaryStackFeatures(features,s1RLabel,"S1RC-","S1RWT-","S1RT-","S1RWC-","S1RTC-");
  addUnaryStackFeatures(features,s1ULabel,"S1UC-","S1UWT-","S1UT-","S1UWC-","S1UTC-");
  addUnaryQueueFeatures(features,q0Label,"Q0WT-");
  addUnaryQueueFeatures(features,q1Label,"Q1WT-");
  addUnaryQueueFeatures(features,q2Label,"Q2WT-");
  addUnaryQueueFeatures(features,q3Label,"Q3WT-");
  addUnaryQueueFeatures(features,qP1Label,"QP1WT-");
  addUnaryQueueFeatures(features,qP2Label,"QP2WT-");
  CoreLabel recentL0Label=getRecentDependent(stack,Transition.LEFT,0);
  CoreLabel recentR0Label=getRecentDependent(stack,Transition.RIGHT,0);
  CoreLabel recentL1Label=getRecentDependent(stack,Transition.LEFT,1);
  CoreLabel recentR1Label=getRecentDependent(stack,Transition.RIGHT,1);
  addUnaryStackFeatures(features,recentL0Label,"recL0C-","recL0WT-","recL0T-","recL0WC-","recL0TC-");
  addUnaryStackFeatures(features,recentR0Label,"recR0C-","recR0WT-","recR0T-","recR0WC-","recR0TC-");
  addUnaryStackFeatures(features,recentL1Label,"recL1C-","recL1WT-","recL1T-","recL1WC-","recL1TC-");
  addUnaryStackFeatures(features,recentR1Label,"recR1C-","recR1WT-","recR1T-","recR1WC-","recR1TC-");
  addBinaryFeatures(features,"S0",s0Label,FeatureComponent.HEADWORD,FeatureComponent.VALUE,"S1",s1Label,FeatureComponent.HEADWORD,FeatureComponent.VALUE);
  addBinaryFeatures(features,"S0",s0Label,FeatureComponent.HEADWORD,FeatureComponent.VALUE,"Q0",q0Label,FeatureComponent.HEADWORD,FeatureComponent.HEADTAG);
  addBinaryFeatures(features,"S1",s1Label,FeatureComponent.HEADWORD,FeatureComponent.VALUE,"Q0",q0Label,FeatureComponent.HEADWORD,FeatureComponent.HEADTAG);
  addBinaryFeatures(features,"Q0",q0Label,FeatureComponent.HEADWORD,FeatureComponent.HEADTAG,"Q1",q1Label,FeatureComponent.HEADWORD,FeatureComponent.HEADTAG);
  addTrigramFeature(features,"S0cS1cS2c-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.VALUE,s2Label,FeatureComponent.VALUE);
  addTrigramFeature(features,"S0wS1cS2c-",s0Label,FeatureComponent.HEADWORD,s1Label,FeatureComponent.VALUE,s2Label,FeatureComponent.VALUE);
  addTrigramFeature(features,"S0cS1wS2c-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.HEADWORD,s2Label,FeatureComponent.VALUE);
  addTrigramFeature(features,"S0cS1cS2w-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.VALUE,s2Label,FeatureComponent.HEADWORD);
  addTrigramFeature(features,"S0cS1cQ0t-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.VALUE,q0Label,FeatureComponent.HEADTAG);
  addTrigramFeature(features,"S0wS1cQ0t-",s0Label,FeatureComponent.HEADWORD,s1Label,FeatureComponent.VALUE,q0Label,FeatureComponent.HEADTAG);
  addTrigramFeature(features,"S0cS1wQ0t-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.HEADWORD,q0Label,FeatureComponent.HEADTAG);
  addTrigramFeature(features,"S0cS1cQ0w-",s0Label,FeatureComponent.VALUE,s1Label,FeatureComponent.VALUE,q0Label,FeatureComponent.HEADWORD);
  addPositionFeatures(features,state);
  Tree s0Node=state.getStackNode(0);
  Tree s1Node=state.getStackNode(1);
  Tree q0Node=state.getQueueNode(0);
  addSeparatorFeatures(features,"S0",s0Label,"S1",s1Label,state.getSeparatorBetween(s0Node,s1Node),state.getSeparatorCount(s0Node,s1Node));
  addSeparatorFeatures(features,"S0",s0Label,"Q0",q0Label,state.getSeparatorBetween(q0Node,s0Node),state.getSeparatorCount(q0Node,s0Node));
  return features;
}
