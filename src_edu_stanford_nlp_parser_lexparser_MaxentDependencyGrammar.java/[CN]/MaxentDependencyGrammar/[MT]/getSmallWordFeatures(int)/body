{
  if (smallWordFeatCache == null) {
    smallWordFeatCache=new short[wordIndex.size()][];
  }
  if (word < smallWordFeatCache.length && smallWordFeatCache[word] != null) {
    return smallWordFeatCache[word];
  }
  short[] wordFeatures;
  Collection<String> stringFeats=smallWordFeatExtractor.makeFeatures(wordIndex.get(word));
  wordFeatures=new short[stringFeats.size()];
  int i=0;
  for (  String feat : stringFeats) {
    smallWordFeatIndex.add(feat);
    wordFeatures[i++]=(short)smallWordFeatIndex.indexOf(feat);
  }
  if (word < smallWordFeatCache.length) {
    smallWordFeatCache[word]=wordFeatures;
  }
  return wordFeatures;
}
