{
  graph=new DirectedMultiGraph<IndexedWord,SemanticGraphEdge>();
  roots=new HashSet<IndexedWord>();
  for (  TypedDependency d : dependencies) {
    TreeGraphNode gov=d.gov();
    TreeGraphNode dep=d.dep();
    GrammaticalRelation reln=d.reln();
    CoreLabel govLabel=new CoreLabel(gov.label());
    CoreLabel depLabel=new CoreLabel(dep.label());
    if (reln != ROOT) {
      IndexedWord govVertex=new IndexedWord(docID,sentIndex,gov.index(),govLabel);
      govVertex.setTag(gov.highestNodeWithSameHead().headTagNode().value());
      IndexedWord depVertex=new IndexedWord(docID,sentIndex,dep.index(),depLabel);
      depVertex.setTag(dep.highestNodeWithSameHead().headTagNode().value());
      if (lemmatize) {
        if (!threadSafe) {
          govVertex.setLemma(Morphology.lemmaStatic(govVertex.value(),govVertex.tag(),true));
          depVertex.setLemma(Morphology.lemmaStatic(depVertex.value(),depVertex.tag(),true));
        }
 else {
          govVertex.setLemma(Morphology.lemmaStaticSynchronized(govVertex.value(),govVertex.tag(),true));
          depVertex.setLemma(Morphology.lemmaStaticSynchronized(depVertex.value(),depVertex.tag(),true));
        }
      }
      addVertex(govVertex);
      addVertex(depVertex);
      addEdge(govVertex,depVertex,reln,Double.NEGATIVE_INFINITY);
    }
 else {
      IndexedWord depVertex=new IndexedWord(docID,sentIndex,dep.index(),depLabel);
      depVertex.setTag(dep.highestNodeWithSameHead().headTagNode().value());
      if (lemmatize) {
        if (!threadSafe) {
          depVertex.setLemma(Morphology.lemmaStatic(depVertex.value(),depVertex.tag(),true));
        }
 else {
          depVertex.setLemma(Morphology.lemmaStaticSynchronized(depVertex.value(),depVertex.tag(),true));
        }
      }
      roots.add(depVertex);
    }
  }
}
