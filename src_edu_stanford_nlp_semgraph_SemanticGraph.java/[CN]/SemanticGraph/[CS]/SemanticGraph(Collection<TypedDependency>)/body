{
  graph=new DirectedMultiGraph<IndexedWord,SemanticGraphEdge>(outerMapFactory,innerMapFactory);
  roots=wordMapFactory.newSet();
  Map<Integer,IndexedWord> vertices=Generics.newHashMap();
  for (  TypedDependency d : dependencies) {
    TreeGraphNode gov=d.gov();
    TreeGraphNode dep=d.dep();
    GrammaticalRelation reln=d.reln();
    if (reln != ROOT) {
      IndexedWord govVertex=vertices.get(gov.index());
      if (govVertex == null) {
        govVertex=new IndexedWord(gov.label());
        vertices.put(gov.index(),govVertex);
      }
      IndexedWord depVertex=vertices.get(dep.index());
      if (depVertex == null) {
        depVertex=new IndexedWord(dep.label());
        vertices.put(dep.index(),depVertex);
      }
      addEdge(govVertex,depVertex,reln,Double.NEGATIVE_INFINITY,d.extra());
    }
 else {
      IndexedWord depVertex=vertices.get(dep.index());
      if (depVertex == null) {
        depVertex=new IndexedWord(dep.label());
        vertices.put(dep.index(),depVertex);
        addVertex(depVertex);
      }
      roots.add(depVertex);
    }
  }
}
