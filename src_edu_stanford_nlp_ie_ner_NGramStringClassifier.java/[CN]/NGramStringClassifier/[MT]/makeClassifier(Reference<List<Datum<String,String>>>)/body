{
  if (useNB) {
    return (new NBLinearClassifierFactory<String,String>(sigma)).trainClassifier(ref);
  }
 else {
    LinearClassifierFactory<String,String> lcf=new LinearClassifierFactory<String,String>((!zippy ? (useSum ? 1e-6 : 1e-4) : 1.0),useSum,(useHuber ? LogPrior.LogPriorType.HUBER.ordinal() : LogPrior.LogPriorType.QUADRATIC.ordinal()),sigma,epsilon,-1);
    lcf.useConjugateGradientAscent();
    LinearClassifier<String,String> lc=lcf.trainClassifier(ref);
    return lc;
  }
}
