{
  double max=(x > y ? x : y);
  if (max == Double.NEGATIVE_INFINITY) {
    return max;
  }
  if (abs(x - y) > 20.0) {
    return max;
  }
  return Math.log(Math.exp(x - max) + Math.exp(y - max)) + max;
}
