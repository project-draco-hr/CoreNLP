{
  double val=0.0;
  val+=function.valueAt(x);
  for (int i=0; i < eqConstraints.length; i++) {
    double c=eqConstraints[i].valueAt(x);
    val+=eqLagrange[i] * c;
    val+=0.5 * eqPenalties[i] * c* c;
  }
  for (int i=0; i < ineqConstraints.length; i++) {
    double c=ineqConstraints[i].valueAt(x);
    double tmp=fmax(c,2.0 * c + ineqLagrange[i] / ineqPenalties[i]);
    val+=ineqLagrange[i] * tmp;
    val+=0.5 * ineqPenalties[i] * tmp* tmp;
  }
  return val;
}
