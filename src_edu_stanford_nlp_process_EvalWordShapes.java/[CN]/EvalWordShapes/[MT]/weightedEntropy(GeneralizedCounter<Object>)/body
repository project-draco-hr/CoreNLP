{
  double entropy=0.0;
  double total=gc.totalCount();
  double weight;
  Set<Object> wordshapes=gc.topLevelKeySet();
  Iterator<Object> it=wordshapes.iterator();
  String wordshape;
  while (it.hasNext()) {
    wordshape=(String)it.next();
    List<Object> l=new ArrayList<Object>(1);
    l.add(wordshape);
    GeneralizedCounter<Object> c=gc.conditionalize(l);
    weight=c.totalCount() / total;
    weight*=Counters.entropy(c.counterView());
    entropy+=weight;
  }
  return entropy;
}
