{
  if (!vertexSet().contains(vertex)) {
    throw new IllegalArgumentException();
  }
  String pat=pattern.replaceAll("<",",<");
  pat=pat.replaceAll(">",",>");
  String[] nodePath=pat.split(",");
  for (  String s : nodePath) {
    if (s.equals("")) {
      continue;
    }
    String word=s.substring(1);
    char dir=s.charAt(0);
    if (dir == '<') {
      List<IndexedWord> parents=getParentList(vertex);
      boolean match=false;
      for (      IndexedWord parent : parents) {
        String lemma=parent.get(LemmaAnnotation.class);
        if (lemma.equals(word)) {
          match=true;
          break;
        }
      }
      if (!match) {
        return false;
      }
    }
 else     if (dir == '>') {
      List<IndexedWord> children=getChildList(vertex);
      boolean match=false;
      for (      IndexedWord child : children) {
        String lemma=(child.get(LemmaAnnotation.class) == null ? "" : child.get(LemmaAnnotation.class));
        if (lemma.equals("")) {
          lemma=child.word().toLowerCase();
        }
        if (lemma.equals(word)) {
          match=true;
          break;
        }
      }
      if (!match) {
        return false;
      }
    }
 else {
      throw new RuntimeException("Warning: bad pattern \"%s\"\n" + pattern);
    }
  }
  return true;
}
