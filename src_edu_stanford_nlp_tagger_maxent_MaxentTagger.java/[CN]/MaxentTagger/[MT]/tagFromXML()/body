{
  InputStream is=null;
  Writer w=null;
  try {
    is=new BufferedInputStream(new FileInputStream(config.getFile()));
    String outFile=config.getOutputFile();
    if (outFile.length() > 0) {
      w=new BufferedWriter(new OutputStreamWriter(new FileOutputStream(outFile),config.getEncoding()));
    }
 else {
      w=new PrintWriter(System.out);
    }
    w.write("<?xml version=\"1.0\" encoding=\"" + config.getEncoding() + "\"?>\n");
    tagFromXML(is,w,config.getXMLInput());
  }
 catch (  FileNotFoundException e) {
    System.err.println("Input file not found: " + config.getFile());
    e.printStackTrace();
  }
catch (  IOException ioe) {
    System.err.println("tagFromXML: mysterious IO Exception");
    ioe.printStackTrace();
  }
 finally {
    IOUtils.closeIgnoringExceptions(is);
    IOUtils.closeIgnoringExceptions(w);
  }
}
