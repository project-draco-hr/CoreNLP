{
  List<CoreMap> sentences=annotation.get(CoreAnnotations.SentencesAnnotation.class);
  if (annotation.get(CoreAnnotations.DocIDAnnotation.class).contains("nw") && corefProperties.getProperty("coref.input.type").equals("conll") && corefProperties.getProperty("coref.language").equals("zh")) {
    CorefProperties.setRemoveNested(corefProperties,false);
  }
 else {
    CorefProperties.setRemoveNested(corefProperties,true);
  }
  List<List<Mention>> mentions=md.findMentions(annotation,dictionaries,corefProperties);
  int currIndex=0;
  for (  CoreMap sentence : sentences) {
    List<Mention> mentionsForThisSentence=mentions.get(currIndex);
    sentence.set(CorefCoreAnnotations.CorefMentionsAnnotation.class,mentionsForThisSentence);
    currIndex++;
  }
}
