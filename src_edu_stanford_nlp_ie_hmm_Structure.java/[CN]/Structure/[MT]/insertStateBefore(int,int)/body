{
  if (state == 1) {
    System.err.println("Can't insert before start state");
    return -1;
  }
  ArrayList<Double> newTransitions=new ArrayList<Double>();
  for (int i=0; i < transitions.size(); i++) {
    newTransitions.add(ZERO);
  }
  transitions.add(newTransitions);
  for (int i=0; i < transitions.size(); i++) {
    ArrayList<Double> curTransitions=(ArrayList<Double>)transitions.get(i);
    Double tProb=curTransitions.get(state);
    if (tProb.doubleValue() != 0.0 && i != state) {
      curTransitions.add(tProb);
      curTransitions.set(state,ZERO);
    }
 else {
      curTransitions.add(ZERO);
    }
  }
  newTransitions.set(state,ONE);
  stateTypes.add(Integer.valueOf(type));
  return transitions.size() - 1;
}
