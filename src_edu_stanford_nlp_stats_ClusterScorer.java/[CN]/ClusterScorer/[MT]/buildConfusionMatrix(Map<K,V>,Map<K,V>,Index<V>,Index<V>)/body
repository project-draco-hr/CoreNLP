{
  if (!clusterMap1.keySet().equals(clusterMap2.keySet())) {
    throw new RuntimeException("keySets of clusterings must be equal.");
  }
  List<K> keys=new ArrayList<K>(clusterMap1.keySet());
  int[] clustering1=new int[keys.size()];
  int[] clustering2=new int[keys.size()];
  for (int i=0; i < keys.size(); i++) {
    K key=keys.get(i);
    V cluster1=clusterMap1.get(key);
    V cluster2=clusterMap2.get(key);
    rowIndex.add(cluster1);
    colIndex.add(cluster2);
    clustering1[i]=rowIndex.indexOf(cluster1);
    clustering2[i]=colIndex.indexOf(cluster2);
  }
  return buildConfusionMatrix(clustering1,clustering2,rowIndex.size(),colIndex.size());
}
