{
  double newV;
synchronized (map) {
    Double v=map.get(key);
    newV=value + (v == null ? 0.0 : (double)v);
    map.put(key,newV);
  }
  totalCount.addAndGet(value);
  return newV;
}
