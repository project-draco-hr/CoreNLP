{
  MatchedExpression.SingleAnnotationExtractor valueExtractor=SequenceMatchRules.createAnnotationExtractor(env,r);
  valueExtractor.valueExtractor=new SequenceMatchRules.CoreMapFunctionApplier<String,Value>(env,r.annotationField,extractor);
  r.extractRule=new SequenceMatchRules.CoreMapExtractRule<String,MatchedExpression>(env,r.annotationField,new SequenceMatchRules.StringPatternExtractRule<MatchedExpression>(pattern,new SequenceMatchRules.StringMatchedExpressionExtractor(valueExtractor,r.matchedExpressionGroup)));
  r.filterRule=new SequenceMatchRules.AnnotationMatchedFilter(valueExtractor);
  r.pattern=pattern;
}
