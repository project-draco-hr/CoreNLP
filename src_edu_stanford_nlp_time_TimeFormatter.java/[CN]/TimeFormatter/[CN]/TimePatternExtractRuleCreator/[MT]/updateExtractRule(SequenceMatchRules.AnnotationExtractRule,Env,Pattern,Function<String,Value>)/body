{
  MatchedExpression.SingleAnnotationExtractor annotationExtractor=SequenceMatchRules.createAnnotationExtractor(env,r);
  annotationExtractor.valueExtractor=new SequenceMatchRules.CoreMapFunctionApplier<String,Value>(env,r.annotationField,extractor);
  r.extractRule=new SequenceMatchRules.CoreMapExtractRule<String,MatchedExpression>(env,r.annotationField,new SequenceMatchRules.StringPatternExtractRule<MatchedExpression>(pattern,new SequenceMatchRules.StringMatchedExpressionExtractor(annotationExtractor,r.matchedExpressionGroup)));
  r.filterRule=new SequenceMatchRules.AnnotationMatchedFilter(annotationExtractor);
  r.pattern=pattern;
}
