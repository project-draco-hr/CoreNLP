{
  List<List<Mention>> predictedMentions=new ArrayList<>();
  Set<String> neStrings=Generics.newHashSet();
  List<Set<IntPair>> mentionSpanSetList=Generics.newArrayList();
  List<CoreMap> sentences=doc.get(CoreAnnotations.SentencesAnnotation.class);
  for (  CoreMap s : sentences) {
    List<Mention> mentions=new ArrayList<>();
    predictedMentions.add(mentions);
    Set<IntPair> mentionSpanSet=Generics.newHashSet();
    Set<IntPair> namedEntitySpanSet=Generics.newHashSet();
    extractPremarkedEntityMentions(s,mentions,mentionSpanSet,namedEntitySpanSet);
    extractNamedEntityMentions(s,mentions,mentionSpanSet,namedEntitySpanSet);
    extractNPorPRP(s,mentions,mentionSpanSet,namedEntitySpanSet);
    extractEnumerations(s,mentions,mentionSpanSet,namedEntitySpanSet);
    addNamedEntityStrings(s,neStrings,namedEntitySpanSet);
    mentionSpanSetList.add(mentionSpanSet);
  }
  if (lang == Locale.CHINESE && CorefProperties.liberalChineseMD(props)) {
    extractNamedEntityModifiers(sentences,mentionSpanSetList,predictedMentions,neStrings);
  }
  for (int i=0, sz=sentences.size(); i < sz; i++) {
    findHead(sentences.get(i),predictedMentions.get(i));
    setBarePlural(predictedMentions.get(i));
  }
  if (lang == Locale.ENGLISH) {
    removeSpuriousMentionsEn(doc,predictedMentions,dict);
  }
 else   if (lang == Locale.CHINESE) {
    if (CorefProperties.liberalChineseMD(props)) {
      removeSpuriousMentionsZhSimple(doc,predictedMentions,dict,CorefProperties.removeNestedMentions(props));
    }
 else {
      removeSpuriousMentionsZh(doc,predictedMentions,dict,CorefProperties.removeNestedMentions(props));
    }
  }
  return predictedMentions;
}
