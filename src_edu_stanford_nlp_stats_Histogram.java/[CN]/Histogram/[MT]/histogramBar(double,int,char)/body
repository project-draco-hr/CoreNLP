{
  if (width < 0)   width=0;
  if (frac < 0.0)   frac=0.0;
  if (frac > 1.0)   frac=1.0;
  char[] chars=new char[width];
  Arrays.fill(chars,' ');
  int bar=(int)Math.round(frac * width);
  Arrays.fill(chars,0,bar,mark);
  if (bar == 0 && frac > 0.0) {
    chars[0]='.';
  }
  return new String(chars);
}
