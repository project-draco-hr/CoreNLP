{
  Map<String,String> extractedFieldsBySlotName=new HashMap<String,String>();
  List<String> ancestors=getAncestors(ontology,className);
  for (int i=0; i < ancestors.size(); i++) {
    className=ancestors.get(i);
    Map extractorFieldsBySlotName=extractableSlotsByClassName.get(className);
    if (extractorFieldsBySlotName == null || extractorFieldsBySlotName.size() == 0) {
      if (verbose) {
        System.err.println("No extractors have been assigned to any slots for " + className);
      }
      continue;
    }
    Set<String> extractorNames=new HashSet<String>();
    Iterator slotNameIter=extractorFieldsBySlotName.keySet().iterator();
    while (slotNameIter.hasNext()) {
      String slotName=(String)slotNameIter.next();
      List extractorFields=(List)extractorFieldsBySlotName.get(slotName);
      if (extractorFields == null || extractorFields.size() == 0) {
        if (verbose) {
          System.err.println("ERROR: null or empty list of extractor fields for slot: " + slotName);
        }
        continue;
      }
      String extractorName=((ExtractorField)extractorFields.get(0)).getExtractorName();
      extractorNames.add(extractorName);
    }
    if (verbose) {
      System.err.println("Attempting to extract slots for " + className);
    }
    Map<String,Map> extractedFieldsByExtractorName=new HashMap<String,Map>();
    Iterator<String> extractorNameIter=extractorNames.iterator();
    while (extractorNameIter.hasNext()) {
      String extractorName=extractorNameIter.next();
      FieldExtractor extractor=getExtractor(extractorName);
      if (extractor == null) {
        if (verbose) {
          System.err.println("ERROR: unable to load extractor: " + extractorName);
        }
      }
 else {
        if (verbose) {
          System.err.println("Extracting from " + extractorName);
        }
        Map extractedFields=extractor.extractFields(text);
        extractedFieldsByExtractorName.put(extractorName,extractedFields);
      }
    }
    if (verbose) {
      System.err.println("Filled slots:");
    }
    slotNameIter=extractorFieldsBySlotName.keySet().iterator();
    while (slotNameIter.hasNext()) {
      String slotName=(String)slotNameIter.next();
      String curValue=extractedFieldsBySlotName.get(slotName);
      if (curValue != null && curValue.length() > 0) {
        continue;
      }
      List extractorFields=(List)extractorFieldsBySlotName.get(slotName);
      ExtractorField ef=(ExtractorField)extractorFields.get(0);
      Map extractedFields=extractedFieldsByExtractorName.get(ef.getExtractorName());
      if (extractedFields == null) {
        extractedFieldsBySlotName.put(slotName,"");
      }
 else {
        String extractedValue=(String)extractedFields.get(ef.getFieldName());
        if (verbose) {
          System.err.println(slotName + ": " + extractedValue);
        }
        extractedFieldsBySlotName.put(slotName,extractedValue);
      }
    }
  }
  return (extractedFieldsBySlotName);
}
