{
  RealVector r=new OpenMapRealVector(size,counter.size());
  for (  Map.Entry<E,Double> entry : counter.entrySet()) {
    int index=keyIndex.indexOf(entry.getKey());
    if (index == -1) {
      throw new RuntimeException(String.format("Counter key '%s' not in keyIndex",entry.getKey()));
    }
    r.setEntry(index,entry.getValue());
  }
  return r;
}
