{
  if (sent != null) {
    Collections.sort(sent.timexes,new Comparator<TimebankTimex>(){
      @Override public int compare(      TimebankTimex o1,      TimebankTimex o2){
        if (o1.tid == o2.tid) {
          return 0;
        }
 else         return (o1.tid < o2.tid) ? -1 : 1;
      }
    }
);
    pw.println();
    for (    String item : sent.origItems) {
      pw.println("PROC |" + item);
    }
    Annotation annotation=new Annotation(sent.text);
    annotation.set(CoreAnnotations.DocDateAnnotation.class,sent.docPubDate);
    pipeline.annotate(annotation);
    List<CoreMap> timexes=annotation.get(TimeAnnotations.TimexAnnotations.class);
    int i=0;
    for (    CoreMap t : timexes) {
      String[] newFields;
      if (sent.timexes.size() > i) {
        String res;
        TimebankTimex goldTimex=sent.timexes.get(i);
        Timex guessTimex=t.get(TimeAnnotations.TimexAnnotation.class);
        String s1=goldTimex.timexStr.replaceAll("\\s+","");
        String s2=guessTimex.text().replaceAll("\\s+","");
        if (s1.equals(s2)) {
          evalStats.estPrStats.incrementTP();
          res="OK";
        }
 else {
          evalStats.estPrStats.incrementFP();
          evalStats.estPrStats.incrementFN();
          res="BAD";
        }
        newFields=new String[]{res,goldTimex.timexId,goldTimex.timexVal,goldTimex.timexOrigVal,goldTimex.timexStr,t.get(TimeAnnotations.TimexAnnotation.class).toString()};
        i++;
      }
 else {
        newFields=new String[]{"NONE",t.get(TimeAnnotations.TimexAnnotation.class).toString()};
        evalStats.estPrStats.incrementFP();
      }
      pw.println("GOT | " + StringUtils.join(newFields,"|"));
    }
    for (; i < sent.timexes.size(); i++) {
      evalStats.estPrStats.incrementFN();
    }
    i=0;
    int lastIndex=0;
    for (    TimebankTimex goldTimex : sent.timexes) {
      int index=sent.text.indexOf(goldTimex.timexStr,lastIndex);
      int endIndex=index + goldTimex.timexStr.length();
      boolean found=false;
      for (; i < timexes.size(); i++) {
        CoreMap t=timexes.get(i);
        if (t.get(CoreAnnotations.CharacterOffsetBeginAnnotation.class) >= endIndex) {
          break;
        }
 else {
          if (t.get(CoreAnnotations.CharacterOffsetBeginAnnotation.class) >= index) {
            found=true;
            evalStats.prStats.incrementTP();
            if (goldTimex.timexOrigVal.equals(t.get(TimeAnnotations.TimexAnnotation.class).value())) {
              evalStats.valPrStats.incrementTP();
            }
 else {
              evalStats.valPrStats.incrementFN();
            }
          }
 else {
            evalStats.prStats.incrementFP();
            evalStats.valPrStats.incrementFP();
          }
        }
      }
      if (!found) {
        evalStats.prStats.incrementFN();
        evalStats.valPrStats.incrementFN();
      }
      lastIndex=endIndex;
    }
    for (; i < timexes.size(); i++) {
      evalStats.prStats.incrementFP();
      evalStats.valPrStats.incrementFP();
    }
  }
}
