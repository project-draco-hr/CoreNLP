{
  boolean useBIO=false;
  if (includeCommon || includePron)   useBIO=true;
  Set<String> mentionTypes=new HashSet<String>();
  if (includeProper)   mentionTypes.addAll(Arrays.asList("NAM","NAMPRE"));
  if (includeCommon)   mentionTypes.addAll(Arrays.asList("NOM","BAR","HLS","NOMPRE"));
  if (includePron)   mentionTypes.addAll(Arrays.asList("PRO","PTV","WHQ"));
  PrintStream os=new PrintStream(new FileOutputStream(fileName));
  String crtDocId="none";
  List<CoreMap> sentences=corpus.get(CoreAnnotations.SentencesAnnotation.class);
  for (  CoreMap sentence : sentences) {
    String docId=sentence.get(DocIDAnnotation.class);
    assert(docId != null);
    if (!docId.equals(crtDocId)) {
      os.println("-DOCSTART- -X- O\n");
      crtDocId=docId;
    }
    sentenceToCoNLL(os,sentence,useBIO,mentionTypes);
    os.println();
  }
  os.close();
  System.err.println("CoNLL format saved in " + fileName);
}
