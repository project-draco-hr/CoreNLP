{
  Index<String> newFeatureIndex=new HashIndex<String>();
  for (int j=0; j < featureWeights[0].length; ++j) {
    boolean useless=true;
    for (int i=0; i < featureWeights.length; ++i) {
      if (featureWeights[i][j] != 0.0) {
        useless=false;
        break;
      }
    }
    if (useless) {
      continue;
    }
    newFeatureIndex.add(featureIndex.get(j));
  }
  double[][] newFeatureWeights=new double[transitionIndex.size()][newFeatureIndex.size()];
  for (int j=0; j < featureWeights[0].length; ++j) {
    int newIndex=newFeatureIndex.indexOf(featureIndex.get(j));
    if (newIndex < 0) {
      continue;
    }
    for (int i=0; i < featureWeights.length; ++i) {
      newFeatureWeights[i][newIndex]=featureWeights[i][j];
    }
  }
  featureIndex=newFeatureIndex;
  featureWeights=newFeatureWeights;
}
