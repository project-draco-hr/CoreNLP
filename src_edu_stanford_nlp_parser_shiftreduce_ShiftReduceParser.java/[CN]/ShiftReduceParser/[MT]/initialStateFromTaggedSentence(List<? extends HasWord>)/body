{
  List<Tree> preterminals=Generics.newArrayList();
  for (int index=0; index < words.size(); ++index) {
    HasWord hw=words.get(index);
    CoreLabel wordLabel=new CoreLabel();
    wordLabel.setIndex(index);
    wordLabel.setValue(hw.word());
    if (!(hw instanceof HasTag)) {
      throw new RuntimeException("Expected tagged words");
    }
    String tag=((HasTag)hw).tag();
    if (tag == null) {
      throw new RuntimeException("Word is not tagged");
    }
    CoreLabel tagLabel=new CoreLabel();
    tagLabel.setValue(((HasTag)hw).tag());
    LabeledScoredTreeNode wordNode=new LabeledScoredTreeNode(wordLabel);
    LabeledScoredTreeNode tagNode=new LabeledScoredTreeNode(tagLabel);
    tagNode.addChild(wordNode);
    wordLabel.set(TreeCoreAnnotations.HeadWordAnnotation.class,wordNode);
    wordLabel.set(TreeCoreAnnotations.HeadTagAnnotation.class,tagNode);
    tagLabel.set(TreeCoreAnnotations.HeadWordAnnotation.class,wordNode);
    tagLabel.set(TreeCoreAnnotations.HeadTagAnnotation.class,tagNode);
    preterminals.add(tagNode);
  }
  return new State(preterminals);
}
