{
  if (annotation.containsKey(CoreAnnotations.SentencesAnnotation.class)) {
    if (nThreads != 1 || maxParseTime > 0) {
      MulticoreWrapper<CoreMap,CoreMap> wrapper=new MulticoreWrapper<CoreMap,CoreMap>(nThreads,new ParserAnnotatorProcessor());
      if (maxParseTime > 0) {
        wrapper.setMaxBlockTime(maxParseTime);
      }
      for (      CoreMap sentence : annotation.get(CoreAnnotations.SentencesAnnotation.class)) {
        wrapper.put(sentence);
        while (wrapper.peek()) {
          wrapper.poll();
        }
      }
      wrapper.join();
      while (wrapper.peek()) {
        wrapper.poll();
      }
    }
 else {
      for (      CoreMap sentence : annotation.get(CoreAnnotations.SentencesAnnotation.class)) {
        doOneSentence(sentence);
      }
    }
  }
 else {
    throw new RuntimeException("unable to find sentences in: " + annotation);
  }
}
