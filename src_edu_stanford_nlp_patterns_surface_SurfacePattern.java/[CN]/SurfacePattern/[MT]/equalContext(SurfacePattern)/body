{
  if (p.equals(this))   return 0;
  String prevContextStr="", nextContextStr="";
  if (prevContext != null)   prevContextStr=StringUtils.join(prevContext," ");
  if (nextContext != null)   nextContextStr=StringUtils.join(nextContext," ");
  if (prevContextStr.equals(p.getPrevContextStr()) && nextContextStr.equals(p.getNextContextStr())) {
    int this_restriction=0, p_restriction=0;
    if (this.getToken().useTag)     this_restriction++;
    if (p.getToken().useTag)     p_restriction++;
    this_restriction-=this.getToken().numWordsCompound;
    p_restriction-=this.getToken().numWordsCompound;
    return this_restriction - p_restriction;
  }
  return Integer.MAX_VALUE;
}
