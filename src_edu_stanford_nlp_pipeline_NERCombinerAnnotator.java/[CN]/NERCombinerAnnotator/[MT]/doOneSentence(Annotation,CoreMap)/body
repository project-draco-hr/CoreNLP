{
  List<CoreLabel> tokens=sentence.get(CoreAnnotations.TokensAnnotation.class);
  List<CoreLabel> output;
  try {
    output=this.ner.classifySentenceWithGlobalInformation(tokens,annotation,sentence);
  }
 catch (  RuntimeInterruptedException e) {
    doOneFailedSentence(annotation,sentence);
    return;
  }
  if (VERBOSE) {
    boolean first=true;
    log.info("NERCombinerAnnotator direct output: [");
    for (    CoreLabel w : output) {
      if (first) {
        first=false;
      }
 else {
        log.info(", ");
      }
      log.info(w.toString());
    }
  }
  if (output != null) {
    if (VERBOSE) {
      boolean first=true;
      log.info("NERCombinerAnnotator direct output: [");
      for (      CoreLabel w : output) {
        if (first) {
          first=false;
        }
 else {
          log.info(", ");
        }
        log.info(w.toString());
      }
      log.info(']');
    }
    for (int i=0; i < tokens.size(); ++i) {
      String neTag=output.get(i).get(CoreAnnotations.NamedEntityTagAnnotation.class);
      String normNeTag=output.get(i).get(CoreAnnotations.NormalizedNamedEntityTagAnnotation.class);
      tokens.get(i).setNER(neTag);
      if (normNeTag != null)       tokens.get(i).set(CoreAnnotations.NormalizedNamedEntityTagAnnotation.class,normNeTag);
      NumberSequenceClassifier.transferAnnotations(output.get(i),tokens.get(i));
    }
    if (VERBOSE) {
      boolean first=true;
      log.info("NERCombinerAnnotator output: [");
      for (      CoreLabel w : tokens) {
        if (first) {
          first=false;
        }
 else {
          log.info(", ");
        }
        log.info(w.toShorterString("Word","NamedEntityTag","NormalizedNamedEntityTag"));
      }
      log.info(']');
    }
  }
 else {
    for (    CoreLabel token : tokens) {
      token.setNER(this.ner.backgroundSymbol());
    }
  }
}
