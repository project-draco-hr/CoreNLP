{
  Tree oldNode=children[0].evaluate(t,m);
  if (oldNode == t) {
    if (children.length > 2) {
      throw new TsurgeonRuntimeException("Attempted to replace a root node with more than one node, unable to proceed");
    }
    return children[1].evaluate(t,m);
  }
  Tree parent=oldNode.parent(t);
  int i=parent.objectIndexOf(oldNode);
  parent.removeChild(i);
  for (int j=1; j < children.length; ++j) {
    Tree newNode=children[j].evaluate(t,m);
    parent.insertDtr(newNode.deepCopy(),i + j - 1);
  }
  return t;
}
